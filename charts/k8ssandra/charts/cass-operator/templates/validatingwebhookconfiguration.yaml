apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: "cassandradatacenter-webhook-registration"
webhooks:
  - name: "cassandradatacenter-webhook.cassandra.datastax.com"
    rules:
      - apiGroups: ["cassandra.datastax.com"]
        apiVersions: ["v1beta1"]
        operations: ["CREATE", "UPDATE"]
        resources: ["cassandradatacenters"]
        scope: "*"
    clientConfig:
      service:
        name: "cassandradatacenter-webhook-service"
        namespace: {{ .Release.Namespace }}
        path: /validate-cassandra-datastax-com-v1beta1-cassandradatacenter
    admissionReviewVersions: ["v1beta1"]
    timeoutSeconds: 10
    failurePolicy: "Ignore"
    matchPolicy: "Equivalent"
    sideEffects: None
